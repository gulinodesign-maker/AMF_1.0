<!doctype html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Montalto PMS</title>
  <link rel="stylesheet" href="./styles.css?v=1.158" />
  <link rel="manifest" href="./manifest.json" />
  <meta name="theme-color" content="#2a74b8" />
  <link rel="apple-touch-icon" href="./assets/apple-touch-icon.png" />
</head>
<body>
  <header class="topbar">
    <div class="topbar-left">
      <img class="logo" src="./assets/logo.jpg" alt="Logo" onerror="this.style.display='none'" />
      <div class="brand">
        <div class="brand-title" id="topbarTitle">Montalto PMS</div>
      </div>
    </div>
      <div class="topbar-month" id="topbarMonth" hidden></div>


    <div class="topbar-right">
      <button class="icon-btn" id="btnTopPlus" aria-label="Aggiungi" hidden>
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 5v14"></path>
          <path d="M5 12h14"></path>
        </svg>
      </button>
<!-- In Home: mostra Impostazioni. Fuori dalla Home: mostra Home -->
      <button class="icon-btn" id="btnTopRight" aria-label="Impostazioni">
      <svg id="iconTopRight" viewBox="0 0 24 24" aria-hidden="true">
        <!-- settings icon (default) -->
        <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z">
        </path>
        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1Z">
        </path>
      </svg>
    </button>
    </div>
  </header>

  <main class="main">
    <!-- HOME -->
    <section class="view" id="viewHome" aria-label="Home">
      <div class="home-layout">
        <div class="home-center" aria-label="Home">
          <section class="grid" aria-label="Home">
        <button class="nav-btn" data-route="pazienti" aria-label="Pazienti">
          <div class="app-icon" aria-hidden="true">
            <svg class="nav-ic" viewBox="0 0 24 24">
              <path d="M20 21a8 8 0 1 0-16 0"></path>
              <path d="M12 13a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z"></path>
            </svg>
          </div>
          <div class="nav-label">Pazienti</div>
        </button>

        <button class="nav-btn" data-route="calendario" aria-label="Calendario">
          <div class="app-icon" aria-hidden="true">
            <svg class="nav-ic" viewBox="0 0 24 24">
              <path d="M8 2v3"></path>
              <path d="M16 2v3"></path>
              <path d="M3 9h18"></path>
              <path d="M5 5h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2Z"></path>
              <path d="M8 13h.01"></path><path d="M12 13h.01"></path><path d="M16 13h.01"></path>
              <path d="M8 17h.01"></path><path d="M12 17h.01"></path><path d="M16 17h.01"></path>
            </svg>
          </div>
          <div class="nav-label">Calendario</div>
        </button>

        <button class="nav-btn" data-route="statistiche" aria-label="Statistiche">
          <div class="app-icon" aria-hidden="true">
            <svg class="nav-ic" viewBox="0 0 24 24">
              <path d="M4 19V5"></path>
              <path d="M4 19h16"></path>
              <path d="M8 16v-6"></path>
              <path d="M12 16v-9"></path>
              <path d="M16 16v-3"></path>
            </svg>
          </div>
          <div class="nav-label">Statistiche</div>
        </button>

        <button class="nav-btn" data-route="societa" aria-label="Società">
          <div class="app-icon" aria-hidden="true">
            <svg class="nav-ic" viewBox="0 0 24 24">
              <path d="M3 21h18"></path>
              <path d="M5 21V7a2 2 0 0 1 2-2h3v16"></path>
              <path d="M10 21V5h7a2 2 0 0 1 2 2v14"></path>
              <path d="M8 9h.01"></path><path d="M8 12h.01"></path><path d="M8 15h.01"></path>
              <path d="M14 9h.01"></path><path d="M14 12h.01"></path><path d="M14 15h.01"></path>
              <path d="M17 9h.01"></path><path d="M17 12h.01"></path><path d="M17 15h.01"></path>
            </svg>
          </div>
          <div class="nav-label">Società</div>
        </button>

      </section>
        </div>
        <div class="home-footer" aria-label="Build">
          <div class="build" id="buildLabel">1.158</div>
        </div>
      </div>
    </section>

    <!-- AUTH: landing con 3 tasti verticali -->
    <section class="view active" id="viewAuth" aria-label="Accesso">
      <div class="card">
        <img class="card-logo" src="./assets/logo.jpg" alt="Logo" />
        <div class="stack">
          <button class="pill-btn pill-blue" id="btnGoCreate">crea account</button>
          <button class="pill-btn pill-gray" id="btnGoModify">modifica account</button>
          <button class="pill-btn pill-green" id="btnGoLogin">login</button>
        </div>
      </div>
    </section>
    <!-- QUICK LOGIN (solo popup) -->
    <section class="view" id="viewQuick" aria-label="Accesso rapido">
    </section>


    <!-- CREA ACCOUNT -->
    <section class="view" id="viewCreate" aria-label="Crea account">
      <div class="card card-form">
        <img class="card-logo" src="./assets/logo.jpg" alt="Logo" />
        <form class="form" id="formCreate" autocomplete="off">
          <input class="field" id="createNome" type="text" placeholder="Nome fisioterapista" autocomplete="off" required autocapitalize="none" autocorrect="off" spellcheck="false" />
          <input class="field" id="createPass" type="password" placeholder="Password" autocomplete="new-password" required autocapitalize="none" autocorrect="off" spellcheck="false" data-lpignore="true" data-1p-ignore="true" />
          <input class="field" id="createPass2" type="password" placeholder="Conferma password" autocomplete="new-password" required autocapitalize="none" autocorrect="off" spellcheck="false" data-lpignore="true" data-1p-ignore="true" />
          <div class="row2">
            <button class="pill-btn pill-gray" type="button" id="btnCreateBack">indietro</button>
            <button class="pill-btn pill-blue" type="submit">crea account</button>
          </div>
        </form>
      </div>
    </section>

    <!-- LOGIN -->
    <section class="view" id="viewLogin" aria-label="Login">
      <div class="card card-form">
        <img class="card-logo" src="./assets/logo.jpg" alt="Logo" />
        <form class="form" id="formLogin" autocomplete="off">
          <input class="field" id="loginNome" type="text" placeholder="Nome" autocomplete="off" required autocapitalize="none" autocorrect="off" spellcheck="false" inputmode="text" data-lpignore="true" data-1p-ignore="true" readonly />
          <input class="field" id="loginPass" type="password" placeholder="Password" autocomplete="new-password" required autocapitalize="none" autocorrect="off" spellcheck="false" data-lpignore="true" data-1p-ignore="true" />
          <div class="row2">
            <button class="pill-btn pill-gray" type="button" id="btnLoginBack">indietro</button>
            <button class="pill-btn pill-green" type="submit">login</button>
          </div>
        </form>
      </div>
    </section>

    <!-- MODIFICA ACCOUNT -->
    <section class="view" id="viewModify" aria-label="Modifica account">
      <div class="card card-form">
        <img class="card-logo" src="./assets/logo.jpg" alt="Logo" />
        <form class="form" id="formModify" autocomplete="off">
          <input class="field" id="modNome" type="text" placeholder="Nome" autocomplete="off" required autocapitalize="none" autocorrect="off" spellcheck="false" inputmode="text" data-lpignore="true" data-1p-ignore="true" readonly />
          <input class="field" id="modOld" type="password" placeholder="Password attuale" autocomplete="new-password" required autocapitalize="none" autocorrect="off" spellcheck="false" data-lpignore="true" data-1p-ignore="true" />
          <input class="field" id="modNew" type="password" placeholder="Nuova password" autocomplete="new-password" required autocapitalize="none" autocorrect="off" spellcheck="false" data-lpignore="true" data-1p-ignore="true" />
          <input class="field" id="modNew2" type="password" placeholder="Conferma nuova password" autocomplete="new-password" required autocapitalize="none" autocorrect="off" spellcheck="false" data-lpignore="true" data-1p-ignore="true" />
          <div class="row2">
            <button class="pill-btn pill-gray" type="button" id="btnModBack">indietro</button>
            <button class="pill-btn pill-blue" type="submit">salva</button>
          </div>
        </form>
      </div>
    </section>

    <!-- IMPOSTAZIONI -->
    <section class="view" id="viewSettings" aria-label="Impostazioni">
      <div class="page">
        <div class="page-header">
          <div class="page-title">Impostazioni</div>
        </div>

        <div class="pill-row">
          <div class="pill-wide" id="pillUser">—</div>
          <div class="pill-wide" id="pillYear">—</div>
        </div>

        <div class="settings-form">
          <label class="label">Anno di esercizio</label>
          <select class="field" id="setAnno" aria-label="Anno di esercizio">
            <option value="">Seleziona anno</option>
            <option value="2022">2022</option>
            <option value="2023">2023</option>
            <option value="2024">2024</option>
            <option value="2025">2025</option>
            <option value="2026">2026</option>
            <option value="2027">2027</option>
            <option value="2028">2028</option>
            <option value="2029">2029</option>
            <option value="2030">2030</option>
          </select>
</div>

        <div class="actions5" aria-label="Azioni impostazioni">
<button class="action-btn a4" id="btnWipe" aria-label="Cancella account e dati">
            <svg viewBox="0 0 24 24"><path d="M3 6h18"></path><path d="M8 6V4h8v2"></path><path d="M6 6l1 16h10l1-16"></path><path d="M10 11v6"></path><path d="M14 11v6"></path></svg>
          </button>
          
          <button class="action-btn a6" id="btnLogout" aria-label="Logout">
            <svg viewBox="0 0 24 24">
              <path d="M10 17l-1 0a4 4 0 0 1-4-4V7a4 4 0 0 1 4-4h1"></path>
              <path d="M15 12H7"></path>
              <path d="M13 9l3 3-3 3"></path>
              <path d="M16 12h5"></path>
            </svg>
          </button>
<button class="action-btn a5" id="btnDbIO" aria-label="Importa o esporta database">
            <svg viewBox="0 0 24 24"><path d="M12 3v10"></path><path d="M8 7l4-4 4 4"></path><path d="M12 21V11"></path><path d="M8 17l4 4 4-4"></path></svg>
          </button>
        </div>
      </div>
    </section>


    <!-- PAZIENTI: LISTA -->
    <section class="view" id="viewPatients" aria-label="Pazienti">
      <div class="page">
        <div class="page-header">
          <div class="page-title">Pazienti</div>
        </div>

        <div class="pill-row pill-row-2" aria-label="Ordinamento">
          
          <button class="pill-wide pill-tab pat-sort-btn" id="patSortDate" aria-label="In scadenza"><svg viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="4.5" width="18" height="16" rx="2"></rect><path d="M16 3v3"></path><path d="M8 3v3"></path><path d="M3 9h18"></path><path d="M12 13v4"></path><path d="M12 13h3"></path></svg><span class="pat-sort-label">Scad</span></button>
          <button class="pill-wide pill-tab pat-sort-btn" id="patSortAZ" aria-label="Ordina A-Z"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M8 6h8"></path><path d="M8 10h5"></path><path d="M8 14h8"></path><path d="M8 18h5"></path><path d="M18 6v12"></path><path d="M15 15l3 3 3-3"></path></svg><span class="pat-sort-label">AZ</span></button>
          <button class="pill-wide pill-tab pat-sort-btn" id="patSortSoc" aria-label="Filtra società"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 21V7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v14"></path><path d="M9 21V9h6v12"></path><path d="M8 13h.01"></path><path d="M8 16h.01"></path><path d="M16 13h.01"></path><path d="M16 16h.01"></path></svg><span class="pat-sort-label">Soc</span></button>
          <button class="pill-wide pill-tab pat-sort-btn" id="patSortToday" aria-label="Oggi"><svg viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="4.5" width="18" height="16" rx="2"></rect><path d="M16 3v3"></path><path d="M8 3v3"></path><path d="M3 9h18"></path><path d="M12 13h.01"></path></svg><span class="pat-sort-label">Oggi</span></button>
        </div>

        <div class="list" id="patientsList" aria-label="Lista pazienti"></div>
      </div>
    </section>

    <!-- PAZIENTE: SCHEDA -->
    <section class="view" id="viewPatientForm" aria-label="Scheda paziente">
      <div class="card card-form patient-card">
        <div class="patient-head">
          <div class="patient-title">Scheda paziente</div>
          <div class="patient-head-actions">
            <button class="mini-icon" id="btnPatCalendar" aria-label="Calendario">
              <svg viewBox="0 0 24 24"><path d="M8 2v3"></path><path d="M16 2v3"></path><path d="M3 9h18"></path><path d="M5 5h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2Z"></path></svg>
            </button>
            <button class="mini-icon" id="btnPatBackList" aria-label="Lista pazienti">
              <svg viewBox="0 0 24 24"><path d="M4 6h16"></path><path d="M4 12h16"></path><path d="M4 18h16"></path></svg>
            </button>
            <button class="mini-icon" id="btnPatEdit" aria-label="Modifica">
              <svg viewBox="0 0 24 24"><path d="M12 20h9"></path><path d="M16.5 3.5a2.1 2.1 0 0 1 3 3L8 18l-4 1 1-4Z"></path></svg>
            </button>
            <button class="mini-icon circle" id="btnPatDelete" aria-label="Elimina paziente" hidden>
              <svg viewBox="0 0 24 24"><path d="M6 6l12 12"></path><path d="M18 6l-12 12"></path></svg>
            </button>
</div>
        </div>
        <div class="divider"></div>

        <form class="form" id="formPatient">
          <input class="field" id="patName" type="text" placeholder="Nome e cognome" autocomplete="name" required />

          
          <div class="row-address" id="rowPatAddress">
            <input class="field" id="patAddress" type="text" placeholder="Indirizzo" autocomplete="street-address" required />
            <button class="geo-btn" id="btnPatGeotag" type="button" aria-label="Geotag" hidden style="position:fixed;left:-9999px;top:0;width:1px;height:1px;opacity:0;">
              <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 21s7-4.5 7-10a7 7 0 1 0-14 0c0 5.5 7 10 7 10Z"></path><circle cx="12" cy="11" r="2.5"></circle></svg>
            </button>
          </div>
<div class="row-soc">
            <input class="field" id="patSoc" type="text" placeholder="Società" readonly />
            <input id="patSocId" type="hidden" />
            <button class="drop-btn" id="btnPickSoc" type="button" aria-label="Seleziona società">
              <svg viewBox="0 0 24 24"><path d="M6 9l6 6 6-6"></path></svg>
            </button>
          </div>

          
          <div class="therapies-wrap" id="therapiesWrap" aria-label="Terapie"></div>

          <div class="therapy-add-row" aria-label="Aggiungi terapia">
            <button class="plus-btn" id="btnAddTherapy" type="button" aria-label="Aggiungi terapia">
              <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 5v14"></path><path d="M5 12h14"></path></svg>
            </button>
          </div>

<button class="pill-btn pill-blue" id="btnPatSave" type="submit">salva</button>
        </form>
      </div>
    </section>


    <!-- CALENDARIO -->
    <section class="view" id="viewCalendar" aria-label="Calendario">
      <div class="calendar-wrap" aria-label="Calendario">
        <div class="calendar-nav" aria-label="Navigazione calendario">
          <div class="calendar-nav-left"><div id="calNowInfo" class="cal-nowinfo" aria-live="polite"></div></div>
          <div class="calendar-nav-center" aria-label="Navigazione">
            <button class="icon-btn" id="btnCalPrev" aria-label="Giorno precedente" hidden>
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M15 18l-6-6 6-6"></path>
            </svg>
          </button>
            <button class="icon-btn" id="btnCalToday" aria-label="Giorno attuale" hidden>
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <circle cx="12" cy="12" r="7"></circle>
              <path d="M12 12h.01"></path>
            </svg>
          </button>
            <button class="icon-btn" id="btnCalNext" aria-label="Giorno successivo" hidden>
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M9 6l6 6-6 6"></path>
            </svg>
          </button>
          </div>
          <div class="calendar-nav-right" aria-label="Vista">
          <button class="icon-btn" id="btnCalPatients" aria-label="Lista pazienti" hidden>
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </button>
          </div>
        </div>

        <div class="calendar-date" id="calDateTitle">—</div>

                <div class="calendar-grid" aria-label="Griglia calendario">
          <div class="cal-corner" id="calCorner" aria-hidden="true"></div>

          <div class="cal-days-scroll" id="calDaysScroll" aria-label="Giorni (scorri)">
            <div class="cal-days" id="calDaysCol" aria-label="Giorni del mese"></div>
          </div>

          <div class="cal-hours-scroll" id="calHoursScroll" aria-label="Ore (scorri verticale)">
            <div class="cal-hours" id="calHoursRow" aria-label="Ore"></div>
          </div>

          <div class="cal-body-scroll" id="calScroll" aria-label="Calendario (scorri)">
            <div class="cal-body" id="calBody" aria-label="Slot"></div>
          </div>
        </div>

                  </div>
      </div>
    </section>

    <!-- MODAL: Seleziona società -->
    <div class="modal" id="modalPickSoc" aria-hidden="true">
      <div class="modal-card">
        <button class="dot-close" id="btnPickSocClose" aria-label="Chiudi"></button>
        <div class="modal-title">Società</div>
        <div class="list" id="socPickList" aria-label="Elenco società"></div>
      </div>
    </div>

    <!-- MODAL: Ora inizio -->
    <div class="modal" id="modalPickTime" aria-hidden="true">
      <div class="modal-card">
        <button class="dot-close" id="btnPickTimeClose" aria-label="Chiudi"></button>
        <div class="modal-title">Ora inizio</div>
        <div class="list" id="timePickList" aria-label="Elenco orari"></div>
      </div>
    </div>

    
    

    <!-- MODAL: Sposta seduta -->
    <div class="modal" id="modalMoveSession" aria-hidden="true">
      <div class="modal-card">
        <div class="modal-title">Sposta seduta</div>

        <div class="label">Terapia</div>
        <div class="pill-wide" id="moveSessionTherapyName" aria-label="Terapia selezionata"></div>

        <div class="row-tabs" aria-label="Selezione nuova data e ora">
          <div class="tab-col">
            <label class="label" for="moveSessionDate">Data</label>
            <div class="pill-wide pill-tab"><input class="pill-tab-input" id="moveSessionDate" type="date" /></div>
          </div>
          <div class="tab-col">
            <label class="label" for="moveSessionTime">Ora</label>
            <div class="pill-wide pill-tab"><input class="pill-tab-input" id="moveSessionTime" type="text" inputmode="none" readonly /></div>
          </div>
        </div>

        <div class="row2">
          <button class="pill-btn pill-gray" type="button" id="btnMoveSessionCancel">annulla</button>
          <button class="pill-btn pill-blue" type="button" id="btnMoveSessionConfirm">sposta</button>
        </div>
      </div>
    </div>


    <div class="modal" id="modalCalCellActions" aria-hidden="true">
      <div class="modal-card">
        <div class="modal-title" id="calCellActionsTitle">—</div>

        <div class="cal-actions-row" aria-label="Azioni seduta">
          <button class="cal-action-btn cal-action-blue" type="button" id="btnCalActionOpen" aria-label="Apri scheda paziente">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <path d="M12 11a4 4 0 1 0 0-8a4 4 0 0 0 0 8z"></path>
            </svg>
          </button>

          <button class="cal-action-btn cal-action-green" type="button" id="btnCalActionMove" aria-label="Modifica giorno e ora seduta">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 8v5l3 2"></path>
              <path d="M21 12a9 9 0 1 1-4.5-7.8"></path>
            </svg>
          </button>

          <button class="cal-action-btn cal-action-red" type="button" id="btnCalActionDelete" aria-label="Elimina seduta">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M3 6h18"></path>
              <path d="M8 6V4h8v2"></path>
              <path d="M19 6l-1 14H6L5 6"></path>
              <path d="M10 11v6"></path>
              <path d="M14 11v6"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>


    </div>
<!-- MODAL: Errore terapia -->
    <div class="modal modal-error" id="modalTherapyError" aria-hidden="true">
      <div class="modal-card modal-card-error">
        <button class="dot-close" id="btnTherapyErrorClose" aria-label="Chiudi"></button>
        <div class="modal-title">Errore</div>
        <div class="modal-text" id="therapyErrorMsg">Conflitto terapia.</div>
      </div>
    </div>

<!-- MODAL: API URL -->
    <div class="modal" id="modalApi" aria-hidden="true">
      <div class="modal-card">
        <div class="modal-title">Collegamento database</div>
        <div class="modal-text">Incolla l’URL /exec della Web App Google Apps Script.</div>
        <input class="field" id="apiUrlInput" type="url" placeholder="https://script.google.com/macros/s/.../exec" />
        <div class="row2">
          <button class="pill-btn pill-gray" type="button" id="btnApiCancel">chiudi</button>
          <button class="pill-btn pill-blue" type="button" id="btnApiSave">salva</button>
        </div>
      </div>
    </div>

    <!-- MODAL: Aggiungi società -->
    <div class="modal" id="modalSoc" aria-hidden="true">
      <div class="modal-card">
        <button class="dot-close" id="btnSocClose" aria-label="Chiudi"></button>
        <div class="modal-title">Aggiungi società</div>

        <input class="field" id="socNomeInput" type="text" placeholder="Nome società" />

        <input class="field" id="socL1Input" type="number" inputmode="decimal" step="0.01" placeholder="L1 (€)" />
        <input class="field" id="socL2Input" type="number" inputmode="decimal" step="0.01" placeholder="L2 (€)" />
        <input class="field" id="socL3Input" type="number" inputmode="decimal" step="0.01" placeholder="L3 (€)" />

        <div class="tag-dots" id="socTagDots" role="group" aria-label="Tag società">
          <button class="tag-dot t1" type="button" data-tag="0" aria-label="Tag 1"></button>
          <button class="tag-dot t2" type="button" data-tag="1" aria-label="Tag 2"></button>
          <button class="tag-dot t3" type="button" data-tag="2" aria-label="Tag 3"></button>
          <button class="tag-dot t4" type="button" data-tag="3" aria-label="Tag 4"></button>
          <button class="tag-dot t5" type="button" data-tag="4" aria-label="Tag 5"></button>
          <button class="tag-dot t6" type="button" data-tag="5" aria-label="Tag 6"></button>
        </div>

        <div class="row3">
                    <button class="pill-btn pill-red" type="button" id="btnSocDelete">modifica</button>
          <button class="pill-btn pill-blue" type="button" id="btnSocSave">salva</button>
        </div>

        <div class="soc-delete-panel" id="socDeletePanel" hidden>
          <div class="soc-delete-title">Società</div>
          <div class="soc-delete-list" id="socDeleteList" aria-label="Elenco società"></div>
        </div>
      </div>
    </div>
    <div class="modal" id="modalPickMonth" aria-hidden="true">
      <div class="modal-card">
        <button class="dot-close" id="btnPickMonthClose" aria-label="Chiudi"></button>
        <div class="modal-title">Mese</div>
        <div class="list" id="monthPickList" aria-label="Elenco mesi"></div>
      </div>
    </div>


    <!-- TOAST -->
    <div class="toast" id="toast" aria-live="polite" aria-atomic="true"></div>

  
    <!-- STATISTICHE -->
    <section class="view" id="viewStats" aria-label="Statistiche">
      <div class="page">
        <div class="page-title">Fatturati &amp; Accessi</div>

        <div class="stats-controls" aria-label="Filtri statistiche">
          <button class="stats-select" id="btnStatsMonth" type="button" aria-label="Seleziona mese">
            <span class="stats-select-text" id="lblStatsMonth">Mese</span>
            <span class="stats-select-badge" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path d="M6 9l6 6 6-6"></path></svg>
            </span>
          </button>

          <button class="stats-select" id="btnStatsSoc" type="button" aria-label="Seleziona società">
            <span class="stats-select-text" id="lblStatsSoc">Società</span>
            <span class="stats-select-badge" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path d="M6 9l6 6 6-6"></path></svg>
            </span>
          </button>

          <div class="stats-soc-dots" id="statsSocDots" aria-label="Selezione rapida società">
            <!-- pallini società generati da JS -->
          </div>
          <div class="stats-divider" aria-hidden="true"></div>

          <div class="stats-levels" id="statsLevelDots" aria-label="Fascia prezzo">
            <!-- bottoni livello generati da JS -->
          </div>
        </div>

        
        <div class="stats-summary-row" aria-label="Totali selezione">
          <div class="stats-summary-pill" aria-label="Totale accessi">
<div class="stats-summary-value" id="statsTotalAccessi">0</div>
          </div>
          <div class="stats-summary-pill" aria-label="Totale fatturato">
<div class="stats-summary-value" id="statsTotalImporto">0 €</div>
          </div>
        </div>

<div class="stats-table-card" id="statsTableCard" aria-label="Tabella fatturati e accessi">
          <div class="stats-table-head" aria-hidden="true">
            <div class="st-c1">PAZIENTE</div>
            <div class="st-c3">ACC</div>
            <div class="st-c4">€</div>
          </div>
          <div class="stats-table-body" id="statsTableBody" aria-label="Elenco"></div>

        </div>
      </div>
    </section>


    <section class="view" id="viewSocieta" aria-label="Società">
      <div class="page">
        <div class="page-header">
          <div class="page-title">Società</div>
        </div>

        <div class="soc-list" id="socList" aria-label="Elenco società"></div>
        <div class="empty-hint" id="socEmptyHint" hidden>Nessuna società. Premi + per aggiungerne una.</div>
      </div>
    </section>


</main>


    <!-- MODAL: Report (sola lettura) -->
    <div class="modal" id="modalReport" aria-hidden="true">
      <div class="modal-card">
        <div class="modal-title">Report</div>
        <div class="report-frame-wrap">
          <iframe id="reportFrame" class="report-frame" title="Report" sandbox="allow-same-origin"></iframe>
        </div>
        <div class="report-actions">
          <button type="button" class="month-report-btn" id="btnReportClose">Chiudi</button>
          <button type="button" class="month-report-btn" id="btnReportPrint">Stampa</button>
        </div>
      </div>
    </div>

  <script src="./config.js"></script>
<!-- DB IMPORT/EXPORT -->
    <div class="modal" id="modalDbIO" aria-hidden="true">
      <div class="modal-card">
        <button class="dot-close" id="btnDbClose" type="button" aria-label="Chiudi"></button>
        <div class="modal-title">Database</div>
        <div class="modal-actions2">
          <button class="pill-btn pill-red" id="btnDbImport">carica</button>
          <button class="pill-btn pill-green" id="btnDbExport">esporta</button>
        </div>
      </div>
    </div>
    <input type="file" id="fileDbImport" accept="application/json" style="position:fixed;left:-9999px;top:0;width:1px;height:1px;opacity:0;" />


<!-- QUICK LOGIN -->
    <div class="modal" id="modalQuickLogin" aria-hidden="true">
      <div class="modal-card">        <div class="modal-title">Login</div>
        <div class="modal-subtitle">Utente: <span id="quickLoginName">—</span></div>

        <form id="formQuickLogin" class="quicklogin-form" style="margin-top:12px;">
          <input class="quicklogin-pass" id="quickLoginPass" type="password" autocomplete="current-password" placeholder="Password" />
          <div class="quicklogin-actions" style="margin-top:12px;">
            <button class="pill-btn pill-blue quicklogin-btn" id="btnQuickLogin" type="submit" aria-label="Accedi">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M10 17l5-5-5-5"></path>
                <path d="M15 12H3"></path>
                <path d="M21 12a9 9 0 1 0-9 9"></path>
              </svg>
            </button>
            <button class="pill-btn pill-gray quicklogin-btn" id="btnQuickLoginOther" type="button" aria-label="Cambia account">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M16 3h5v5"></path>
                <path d="M21 3l-6 6"></path>
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <path d="M12 7a4 4 0 1 0 0 8a4 4 0 0 0 0-8"></path>
              </svg>
            </button>
          </div>
        </form></div>
      </div>
    </div>



  <script src="./app.js?v=1.158"></script>

    

    <!-- MODAL: Società -->
    <div class="modal" id="modalSoc" aria-hidden="true">
      <div class="modal-card">
        <button class="dot-close" id="btnSocClose" type="button" aria-label="Chiudi"></button>
        <div class="modal-title">Società</div>

        <div class="form-grid">
          <label class="label">Nome società</label>
          <input class="field" id="socNomeInput" type="text" inputmode="text" autocomplete="off" />

          <label class="label">Tariffa L1 (€)</label>
          <input class="field" id="socL1Input" type="text" inputmode="decimal" autocomplete="off" />

          <label class="label">Tariffa L2 (€)</label>
          <input class="field" id="socL2Input" type="text" inputmode="decimal" autocomplete="off" />

          <label class="label">Tariffa L3 (€)</label>
          <input class="field" id="socL3Input" type="text" inputmode="decimal" autocomplete="off" />
        </div>

        <div class="soc-tag-row" aria-label="Colore società">
          <div class="soc-tag-dots" id="socTagDots"></div>
        </div>

        <div class="modal-actions3">
          <button type="button" class="pill-btn pill-white" id="btnSocCancel" aria-label="Annulla">
            <svg viewBox="0 0 24 24"><path d="M6 6l12 12"></path><path d="M18 6L6 18"></path></svg>
          </button>
          <button type="button" class="pill-btn pill-red" id="btnSocDelete" aria-label="Elimina">
            <svg viewBox="0 0 24 24"><path d="M3 6h18"></path><path d="M8 6V4h8v2"></path><path d="M6 6l1 16h10l1-16"></path><path d="M10 11v6"></path><path d="M14 11v6"></path></svg>
          </button>
          <button type="button" class="pill-btn pill-green" id="btnSocSave" aria-label="Salva">
            <svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"></path></svg>
          </button>
        </div>

        <div class="soc-delete-panel" id="socDeletePanel" hidden>
          <div class="label">Seleziona una società da eliminare</div>
          <div class="soc-delete-list" id="socDeleteList"></div>
        </div>
      </div>
    </div>

</body>
</html>
